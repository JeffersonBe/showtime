(function(a){a.fn.reform=function(b){var c={field_id_prefix:"reform-",ajax_loader_id:"reform_ajax_loader_id",message_placeholder_id:"reform_message_placeholder",error_message_html:'<div class="reform_field_error_container"><span class="reform_error_field">&#9650;&nbsp;%message%</span></div>',fatal_error_message:"Internal Server Error",field_error_container_class:"reform_field_error_container",message_placeholder_error_class:"reform_error",message_placeholder_success_class:"reform_success"};var b=a.extend(c,b);a("#"+b.ajax_loader_id).hide();var d=a(this);d.submit(function(f){a("#"+b.ajax_loader_id).show();a("#"+d.attr("id")+" input[type=submit]").attr("disabled","disabled");a.uniform.update("#"+d.attr("id")+" input[type=submit]");f.preventDefault();d.ajaxSubmit({dataType:"json",type:"post",iframe:true,async:false,data:{is_ajax:1},success:function(h){a("input[type=submit]").removeAttr("disabled");a.uniform.update("#"+d.attr("id")+" input[type=submit]");a("#"+b.ajax_loader_id).hide();a("#"+d.attr("id")+" ."+b.field_error_container_class).fadeOut("slow").remove();if(h.result==false){h.message.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">");h.message.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">");if(h.message!=""){var e=a("#"+b.message_placeholder_id).parent();if((e.css("display")=="none")||(e.css("display")=="")){e.css("display","block")}a("#"+b.message_placeholder_id).hide().addClass(b.message_placeholder_error_class).html(h.message).fadeIn(100)}a.each(h.fields,function(n,m){var o=m.reason;if(o!=null){o=m.reason.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">");o=o.replace(/&amp;lt;/g,"&lt;").replace(/&amp;gt;/g,"&gt;")}b.error_message_html=b.error_message_html.replace(/&gt;/g,">").replace(/&lt;/g,"<");var j=a(b.error_message_html.replace("%message%",o)).fadeIn("slow");a("#"+b.field_id_prefix+m.field_name).append(j);if(typeof Recaptcha==="object"){if(m.field_name=="recaptcha_challenge_field"){a("#recaptcha_widget_div").after(j);Recaptcha.reload()}}});var l=50;var i=a(window).scrollTop()-l;var k=a("#"+d.attr("id")+" ."+b.field_error_container_class).parent();if(k!=null){var g=(k.offset()==null)?0:k.offset().top;if(g<i){a("html,body").animate({scrollTop:g-l},300)}}}else{h.message=h.message.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">");h.message=h.message.replace(/&amp;lt;/g,"&lt;").replace(/&amp;gt;/g,"&gt;");a("#"+d.attr("id")+" .reform_field").parent().fadeOut();var e=a("#"+b.message_placeholder_id).parent();if((e.css("display")=="none")||(e.css("display")=="")){e.css("display","block")}a("#"+b.message_placeholder_id).addClass(b.message_placeholder_success_class).html(h.message).fadeIn("slow")}},error:function(){a("#"+b.ajax_loader_id).hide();a("#"+d.attr("id")+" input[type=submit]").removeAttr("disabled");a.uniform.update("#"+d.attr("id")+" input[type=submit]");a("#"+b.message_placeholder_id).addClass(b.message_placeholder_error_class).html(b.fatal_error_message)}});return false});return this.each(function(){})}})(jQuery);